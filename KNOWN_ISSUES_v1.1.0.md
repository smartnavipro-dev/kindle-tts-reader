# 既知の問題 - Kindle TTS Reader v1.1.0

**作成日**: 2025-12-21
**ステータス**: 調査完了 - 修正準備中

---

## 🐛 **優先度: 高 - OCR辞書の未登録誤認識**

### **問題の詳細**
v1.0.28のテストで以下の誤認識パターンが発見されたが、現在の辞書に未登録：

| 誤認識 | 正解 | 頻度 | 現在のパターン | 登録状況 |
|--------|------|------|----------------|----------|
| 順将 | 価格 | 低 | `[再価洒偏海済梅恒][格将終]` | ❌ 「順」未登録 |
| 需解 | 需要 | 低 | `[講書霜艦需能][要婁]` | ❌ 「解」未登録 |
| 福稿 | 価格 | 低 | `[再価洒偏海済梅恒][格将終]` | ❌ 「福稿」未登録 |

### **影響範囲**
- 経済用語の読み上げ精度に影響
- 頻度は低いが、ユーザー体験に影響

### **推奨対応**
TextCorrector.ktの以下のパターンを更新：

```kotlin
// 修正前
GeneralizedRule(
    pattern = Regex("[再価洒偏海済梅恒][格将終]"),
    correct = "価格",
    description = "価格の誤認識"
),

// 修正後
GeneralizedRule(
    pattern = Regex("[再価洒偏海済梅恒順福][格将終稿]"),
    correct = "価格",
    description = "価格の誤認識"
),

// 需要パターンも同様に修正
GeneralizedRule(
    pattern = Regex("[講書霜艦需能][要婁解]"),
    correct = "需要",
    description = "需要の誤認識"
),
```

**所要時間**: 5分

---

## ⚠️ **優先度: 中 - 文頭文字の欠落**

### **問題の詳細**
- 一部のテキストで文頭文字が欠落する（頻度: <1%）
- ML Kit OCRエンジンの認識範囲の問題と推測

### **影響範囲**
- 頻度が非常に低い
- 読み上げには大きな影響なし

### **推奨対応**
- OCRの認識領域を拡張（padding追加）
- または、文頭認識の再試行ロジック追加

**所要時間**: 30分〜1時間

---

## ⚠️ **優先度: 中 - 記号・数字の認識精度**

### **問題の詳細**
- 記号（特殊文字）の認識精度がやや低い
- 数字の誤認識（例: 「1」→「l」）

### **影響範囲**
- 統計データや数式の読み上げ精度
- 一般的な読書には大きな影響なし

### **推奨対応**
- 数字専用の補正パターン追加
- 記号フィルタリングの改善

**所要時間**: 30分

---

## ℹ️ **優先度: 低 - Phase 2/3機能の無効化**

### **問題の詳細**
以下の機能が一時的に無効化されている：

```kotlin
private const val ENABLE_PHASE2 = false              // 形態素解析
private const val ENABLE_OKURIGANA_CORRECTION = false // 送り仮名補正
private const val ENABLE_SOKUON_CHOON_CORRECTION = false // 促音・長音補正
private const val ENABLE_KANJI_SHAPE_CORRECTION = false  // 漢字字形補正
```

### **理由**
- Phase 2: 実測補正率0%（Kuromojiの制約）
- Phase 3機能: OOM（メモリ不足）問題

### **影響範囲**
- Phase 1（パターンマッチング）で57-85%の補正率を達成
- LLM補正（Gemini 2.5 Flash）でカバー
- 実用上は問題なし

### **推奨対応**
- Phase 3機能のメモリ最適化
- またはPhase 3機能の削除を検討

**所要時間**: 2〜3時間（メモリプロファイリング含む）

---

## 📊 **パフォーマンス現状**

### **良好な指標**
- ✅ OCR処理速度: 525ms（優秀）
- ✅ メモリリークなし
- ✅ 安定動作（30分連続テスト成功）
- ✅ LLM補正成功率: 高い

### **改善余地**
- ⚡ Phase 3機能の有効化（メモリ最適化後）
- ⚡ 辞書の拡充（150語以上を目標）

---

## 🎯 **次期バージョン計画（v1.1.1）**

### **Quick Fixes（即時対応可能）**
1. ✅ OCR辞書の未登録誤認識を修正（5分）
2. ✅ 数字補正パターンの追加（15分）
3. ✅ ドキュメントの更新（5分）

**合計所要時間**: 25分

### **Medium-term Improvements（中期対応）**
1. 文頭文字欠落問題の調査・修正（1時間）
2. 記号認識の改善（30分）
3. Phase 3機能のメモリ最適化（2〜3時間）

**合計所要時間**: 4〜5時間

---

**更新日**: 2025-12-21
**次のアクション**: Quick Fixesの実施（v1.1.1リリース準備）
