# Kindle TTS Reader テストガイド

## 📱 実機テスト手順

### 前提条件
1. **Androidデバイス** (Android 5.0以上)
2. **Kindleアプリ** がインストール済み
3. **USBデバッグ** が有効

### Step 1: APKインストール

#### 方法A: ADBコマンド
```bash
# APKをデバイスにインストール
adb install C:\Users\chanc\KindleTTSReader\app\build\outputs\apk\debug\app-debug.apk

# インストール確認
adb shell pm list packages | grep kindletts
```

#### 方法B: 手動インストール
1. APKファイルをデバイスに転送
2. ファイルマネージャーでAPKを開く
3. 「不明なソースからのアプリ」を許可
4. インストール実行

### Step 2: 権限設定テスト

#### 2.1 画面キャプチャ権限
```
設定 → アプリ → Kindle TTS Reader → 権限
「画面の録画」権限を確認
```

#### 2.2 オーバーレイ権限
```
設定 → アプリ → 特別なアプリアクセス → 他のアプリの上に表示
Kindle TTS Readerを有効化
```

#### 2.3 アクセシビリティ権限
```
設定 → ユーザー補助 → Kindle TTS Reader
サービスを有効化
```

### Step 3: 基本機能テスト

#### 3.1 アプリ起動テスト
- [ ] アプリが正常に起動する
- [ ] UIが正しく表示される
- [ ] 権限ボタンが機能する

#### 3.2 権限取得テスト
- [ ] 画面キャプチャ権限要求が表示される
- [ ] オーバーレイ権限設定画面に遷移する
- [ ] アクセシビリティ設定画面に遷移する

#### 3.3 TTS初期化テスト
- [ ] TextToSpeech が初期化される
- [ ] 日本語音声が利用可能
- [ ] 英語フォールバック機能

### Step 4: Kindle連携テスト

#### 4.1 Kindleアプリでのテスト
1. Kindleアプリを開く
2. 任意の本を開く
3. Kindle TTS Readerで「読み上げ開始」をタップ
4. 以下を確認：
   - [ ] 画面キャプチャが開始される
   - [ ] OCRでテキストが抽出される
   - [ ] TTSで読み上げが実行される
   - [ ] オーバーレイUIが表示される

#### 4.2 自動ページめくりテスト
- [ ] ページ終了時に自動でページがめくられる
- [ ] 手動ページ送り/戻しボタンが機能する
- [ ] Kindleアプリが正しく反応する

### Step 5: エラーケーステスト

#### 5.1 権限なしテスト
- [ ] 権限なしでも適切なエラーメッセージが表示される
- [ ] アプリがクラッシュしない

#### 5.2 Kindleアプリなしテスト
- [ ] Kindleアプリが起動していない場合の動作
- [ ] 適切なエラーハンドリング

#### 5.3 ネットワークエラーテスト
- [ ] オフライン状態での動作
- [ ] ML Kit処理の動作確認

### Step 6: パフォーマンステスト

#### 6.1 メモリ使用量
```bash
# メモリ使用量監視
adb shell dumpsys meminfo com.kindletts.reader
```

#### 6.2 CPU使用率
```bash
# CPU使用率監視
adb shell top | grep kindletts
```

#### 6.3 バッテリー消費
- [ ] 長時間使用時のバッテリー消費を確認
- [ ] バックグラウンド処理の最適化確認

### Step 7: ログ確認

#### デバッグログの取得
```bash
# アプリのログを表示
adb logcat | grep KindleTTS

# 特定のタグでフィルタ
adb logcat -s KindleTTS_Service KindleTTS_AutoPageTurn KindleTTS_Main
```

### Step 8: 不具合報告フォーマット

問題発見時は以下の情報を記録：

```
【環境情報】
- デバイス:
- Android バージョン:
- Kindle アプリバージョン:

【問題内容】
- 発生タイミング:
- 期待される動作:
- 実際の動作:
- 再現手順:

【ログ情報】
```

## 🚀 次のステップ

テスト完了後：
1. 問題があれば修正実装
2. 本番用リリースビルド作成
3. パフォーマンス最適化
4. ユーザードキュメント作成

---
🔧 Generated with Claude Code